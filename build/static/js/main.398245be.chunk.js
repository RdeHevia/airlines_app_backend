(this.webpackJsonpnew_airlines=this.webpackJsonpnew_airlines||[]).push([[0],{13:function(e,t,a){e.exports=a(27)},24:function(e,t,a){},25:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(3),i=a(7),l=a.n(i),u=(a(24),a(25),a(2)),o=a.n(u),s=a(1),d=a(5),f=a(4),p=function(){var e=Object(f.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("/api","/routes"));case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(f.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("/api","/airlines"));case 2:return e.next=4,e.sent.json();case 4:return t=e.sent,e.abrupt("return",t.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{display:!0})})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(f.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("/api","/airports"));case 2:return e.next=4,e.sent.json();case 4:return t=e.sent,e.abrupt("return",t.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{display:!0})})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v={},h=function(){var e=Object(f.a)(o.a.mark((function e(){var t,a,n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([p(),m(),b()]);case 2:return t=e.sent,a=Object(d.a)(t,3),n=a[0],r=a[1],c=a[2],v={routesRAW:n,airlinesRAW:r,airportsRAW:c},e.abrupt("return",v);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(e,t){for(var a=0;a<t.length;a++){var n=t[a];if(n.id===e)return n.name}return null},E=function(e,t){for(var a=0;a<t.length;a++){var n=t[a];if(n.code===e)return n.name}return null},j=function(e,t){for(var a=0;a<t.length;a++){var n=t[a];if(n.code===e)return[n.lat,n.long]}return[null,null]},g=function(e){var t=e.route;return(r.a.createElement("tr",null,r.a.createElement("td",null,t.airlineName),r.a.createElement("td",null,t.srcName),r.a.createElement("td",null,t.destName)))},y=function(e){var t=e.handlerPreviousPage,a=e.handlerNextPage,n=e.sliceStart,c=e.sliceEnd,i=e.numberOfRoutes,l=0===n,u=c===i;return r.a.createElement("div",{className:"pagination"},r.a.createElement("p",null,"Showing ",n+1,"-",c," of ",i," routes."),r.a.createElement("button",{onClick:t,disabled:l},"Previous Page"),r.a.createElement("button",{onClick:a,disabled:u},"Next Page"))},R=function(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.routes})),a=t.all,n=t.filteredRoutesIndexes,i=t.displayRange,l=n.length,u=i[0],o=i[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:"routes-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Airline"),r.a.createElement("th",null,"Source Airport"),r.a.createElement("th",null,"Destination Airport"))),r.a.createElement("tbody",null,n.slice(u,o).map((function(e){var t=a[e];return(r.a.createElement(g,{key:t.id,route:t}))})))),r.a.createElement(y,Object.assign({handlerPreviousPage:function(t){t.preventDefault(),e({type:"PREVIOUS_PAGE"})},handlerNextPage:function(t){t.preventDefault(),e({type:"NEXT_PAGE"})}},{sliceStart:u,sliceEnd:o,numberOfRoutes:l})))},I=function(e){var t=e.x1,a=e.y1,n=e.x2,c=e.y2;return(r.a.createElement("g",{key:""},r.a.createElement("circle",{className:"source",cx:t,cy:a},r.a.createElement("title",null)),r.a.createElement("circle",{className:"destination",cx:t,cy:a},r.a.createElement("title",null)),r.a.createElement("path",{d:"M".concat(t," ").concat(a," L ").concat(n," ").concat(c)})))},x=function(){var e=Object(c.c)((function(e){return e.routes})),t=e.all,a=e.filteredRoutesIndexes;return(r.a.createElement("svg",{className:"map",viewBox:"-180 -90 360 180"},r.a.createElement("g",{transform:"scale(1 -1)"},r.a.createElement("image",{xlinkHref:"equirectangular_world.jpg",href:"equirectangular_world.jpg",x:"-180",y:"-90",height:"100%",width:"100%",transform:"scale(1 -1)"}),a.map((function(e){var a=t[e];return(r.a.createElement(I,{key:a.id,x1:a.srcLong,y1:a.srcLat,x2:a.destLong,y2:a.destLat}))})))))},w=function(e){return{type:"FILTER",data:Object(s.a)({},e)}},A=function(e,t){var a={};return t.forEach((function(t){t.airline===e&&(a[t.src]=!0,a[t.dest]=!0)})),a},N=function(e,t){var a={};return t.forEach((function(t){t.src!==e&&t.dest!==e||(a[t.airline]=!0)})),a},k=function(e){var t=e.list,a=e.handler,n=e.valueKey,c=e.currentValue,i=e.title;return(r.a.createElement("select",{value:c,onChange:a},r.a.createElement("option",{value:"all"},i),t.map((function(e){return r.a.createElement("option",{key:e[n],value:e[n],disabled:!e.display},e.name)}))))},P=function(e){var t=e.handler,a=e.airlineId,n=e.airportCode,c="all"===a&&"all"===n;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:t,disabled:c},"Show All Routes"))},S=function(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.filter})),a=Object(c.c)((function(e){return e.routes.all}));return r.a.createElement("p",null,"Show routes on",r.a.createElement(k,{list:Object(c.c)((function(e){return e.airlines})),handler:function(n){var r=+n.target.value?+n.target.value:n.target.value,c=A(r,a);e(w(Object(s.a)(Object(s.a)({},t),{},{airlineId:r,airlineAirports:c})))},valueKey:"id",currentValue:Object(c.c)((function(e){return e.filter.airlineId})),title:"All Airlines"}),"flying in or out of",r.a.createElement(k,{list:Object(c.c)((function(e){return e.airports})),handler:function(n){var r=n.target.value,c=N(r,a);e(w(Object(s.a)(Object(s.a)({},t),{},{airportCode:r,airportAirlines:c})))},valueKey:"code",currentValue:Object(c.c)((function(e){return e.filter.airportCode})),title:"All Airports"}),r.a.createElement(P,{handler:function(a){a.preventDefault(),e(w(Object(s.a)(Object(s.a)({},t),{},{airlineId:"all",airportCode:"all"})))},airlineId:t.airlineId,airportCode:t.airportCode}))},T=function(){var e=Object(c.b)();return Object(n.useEffect)((function(){e(function(){var e=Object(f.a)(o.a.mark((function e(t){var a,n,r,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("{}"!==JSON.stringify(v)){e.next=6;break}return e.next=3,h();case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=v;case 7:a=e.t0,n=a.routesRAW,r=a.airlinesRAW,c=a.airportsRAW,i=n.map((function(e){var t=j(e.src,c),a=Object(d.a)(t,2),n=a[0],i=a[1],l=j(e.dest,c),u=Object(d.a)(l,2),o=u[0],f=u[1],p="".concat(e.airline,"-").concat(e.src,"-").concat(e.dest);return Object(s.a)(Object(s.a)({},e),{},{airlineName:O(e.airline,r),srcName:E(e.src,c),srcLat:n,srcLong:i,destName:E(e.dest,c),destLat:o,destLong:f,id:p})})),t({type:"INIT_ROUTES",data:i});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(f.a)(o.a.mark((function e(t){var a,n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("{}"!==JSON.stringify(v)){e.next=6;break}return e.next=3,h();case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=v;case 7:a=e.t0,n=a.routesRAW,r=a.airlinesRAW,c=r.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{airports:A(e.id,n),display:!0})})),t({type:"INIT_AIRLINES",data:c});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(f.a)(o.a.mark((function e(t){var a,n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("{}"!==JSON.stringify(v)){e.next=6;break}return e.next=3,h();case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=v;case 7:a=e.t0,n=a.routesRAW,r=a.airportsRAW,c=r.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{airlines:N(e.code,n),display:!0})})),t({type:"INIT_AIRPORTS",data:c});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),r.a.createElement("div",{className:"app"},r.a.createElement("header",{className:"header"},r.a.createElement("h1",{className:"title"},"Airline Routes")),r.a.createElement("section",null,r.a.createElement(x,null),r.a.createElement(S,null),r.a.createElement(R,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=a(6),C=a(11),_=a(12),W=Object(L.combineReducers)({routes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{all:[],filteredRoutesIndexes:[],displayRange:[0,25]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_ROUTES":var a=t.data.map((function(e,t){return t})),n=0,r=25>a.length?a.length:25;return{all:t.data,filteredRoutesIndexes:a,displayRange:[n,r]};case"FILTER":var c=t.data,i=c.airlineId,l=c.airportCode,u=e.all,o=u.reduce((function(e,t,a){return t.airline!==i&&"all"!==i||t.src!==l&&t.dest!==l&&"all"!==l?e:e.concat(a)}),[]),d=0,f=25>o.length?o.length:25;return Object(s.a)(Object(s.a)({},e),{},{filteredRoutesIndexes:o,displayRange:[d,f]});case"NEXT_PAGE":var p=e.displayRange.map((function(e){return e+25}));return Object(s.a)(Object(s.a)({},e),{},{displayRange:p});case"PREVIOUS_PAGE":var m=e.displayRange.map((function(e){return e-25}));return Object(s.a)(Object(s.a)({},e),{},{displayRange:m});default:return e}},airlines:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_AIRLINES":return t.data;case"FILTER":var a=e,n=t.data,r=n.airlineId,c=n.airportCode,i=n.airportAirlines;return a.map((function(e){return"all"===r&&"all"===c||"all"===r&&i[e.id]||r===e.id?Object(s.a)(Object(s.a)({},e),{},{display:!0}):Object(s.a)(Object(s.a)({},e),{},{display:!1})}));default:return e}},airports:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_AIRPORTS":return t.data;case"FILTER":var a=e,n=t.data,r=n.airlineId,c=n.airportCode,i=n.airlineAirports;return a.map((function(e){return"all"===r&&"all"===c||i[e.code]&&"all"===c||c===e.code?Object(s.a)(Object(s.a)({},e),{},{display:!0}):Object(s.a)(Object(s.a)({},e),{},{display:!1})}));default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{airlineId:"all",airportCode:"all",airlineAirports:{},airportAirlines:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FILTER":return Object(s.a)({},t.data);default:return Object(s.a)({},e)}}}),F=Object(L.createStore)(W,Object(C.composeWithDevTools)(Object(L.applyMiddleware)(_.a)));l.a.render(r.a.createElement(c.a,{store:F},r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.398245be.chunk.js.map